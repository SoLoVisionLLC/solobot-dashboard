<!-- =================== AGENTS PAGE =================== -->
<div id="page-agents" class="page">

    <!-- Sticky toolbar: full-bleed, outside the padded memory-page -->
    <div class="agents-toolbar">
        <input type="text" id="memory-search" class="input agents-toolbar-search"
            placeholder="üîç  Search agents or files‚Ä¶"
            oninput="if(window._memoryCards && window._memoryCards.getLayout()==='classic'){renderMemoryFiles(this.value)}else{window._memoryCards && window._memoryCards.renderAgentCardsView(this.value)}">
        <button class="btn btn-secondary btn-sm" onclick="syncMemoryFilesNow()">üîÑ Sync</button>
        <div id="sync-status" class="sync-status" style="white-space:nowrap; flex-shrink:0;">
            <span class="status-dot success"></span>
            <span id="last-memory-sync" style="font-size:11px; color:var(--text-muted);">--</span>
        </div>
        <div class="memory-layout-toggle" style="margin-left:auto; flex-shrink:0;">
            <button id="memory-toggle-grid" title="Org Chart"
                onclick="window._memoryCards && window._memoryCards.setLayout('org-tree')">‚äû</button>
            <button id="memory-toggle-list" title="List View"
                onclick="window._memoryCards && window._memoryCards.setLayout('classic')">‚ò∞</button>
        </div>
    </div>

    <!-- Scrollable content: padded below the toolbar -->
    <div class="memory-page">
        <div style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
            <button id="agents-view-org" class="btn btn-secondary btn-sm" onclick="window._dailyJournal && window._dailyJournal.showOrg()">üó∫Ô∏è Team Canvas</button>
            <button id="agents-view-log" class="btn btn-ghost btn-sm" onclick="window._dailyJournal && window._dailyJournal.showLog()">üìí Daily Log</button>
            <button id="agents-view-journal" class="btn btn-ghost btn-sm" onclick="window._dailyJournal && window._dailyJournal.showJournalTimeline()">üìù Daily Journal</button>
        </div>

        <div id="agents-org-shell">
            <!-- Org Tree / Cards View -->
            <div id="memory-cards-view" style="display: none;"></div>

            <!-- Classic / File Browser View -->
            <div id="memory-classic-view">
                <div style="display: grid; grid-template-columns: 280px 1fr; gap: 16px; margin-bottom: 16px;">
                    <!-- File Tree Browser -->
                    <div
                        style="background: var(--surface-1); border: 1px solid var(--border-default); border-radius: var(--radius-lg); padding: 12px; max-height: 600px; overflow-y: auto;">
                        <div
                            style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--text-muted); text-transform: uppercase;">
                            File Tree</div>
                        <div style="margin-bottom: 8px;">
                            <input type="text" id="memory-browser-search" class="input" placeholder="Search files‚Ä¶"
                                oninput="searchMemoryFiles()" style="font-size: 12px; padding: 4px 8px; width: 100%;">
                        </div>
                        <div id="memory-tree" style="font-size: 12px;"></div>
                    </div>
                    <!-- File Preview -->
                    <div id="memory-file-preview"
                        style="background: var(--surface-1); border: 1px solid var(--border-default); border-radius: var(--radius-lg); min-height: 200px;">
                        <div style="color: var(--text-muted); font-size: 13px; text-align: center; padding: 40px;">Select a
                            file to preview</div>
                    </div>
                </div>
                <div id="memory-files-grid" class="docs-grid"></div>
            </div>
        </div>

        <div id="agents-log-shell" style="display:none;">
            <div style="background: var(--surface-1); border:1px solid var(--border-default); border-radius: var(--radius-lg); padding: 12px; margin-bottom: 12px; display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap:10px;">
                <div>
                    <label style="font-size:11px; color:var(--text-muted);">Date</label>
                    <input id="journal-filter-date" type="date" class="input" style="width:100%;" />
                </div>
                <div>
                    <label style="font-size:11px; color:var(--text-muted);">Agent</label>
                    <select id="journal-filter-agent" class="input" style="width:100%;">
                        <option value="">All agents</option>
                    </select>
                </div>
                <div>
                    <label style="font-size:11px; color:var(--text-muted);">Tag</label>
                    <input id="journal-filter-tag" type="text" class="input" placeholder="e.g. blocker" style="width:100%;" />
                </div>
                <div style="display:flex; align-items:end; gap:8px;">
                    <button class="btn btn-primary btn-sm" onclick="window._dailyJournal && window._dailyJournal.search()">Search</button>
                    <button class="btn btn-ghost btn-sm" onclick="window._dailyJournal && window._dailyJournal.clearFilters()">Reset</button>
                </div>
            </div>

            <div style="display:grid; grid-template-columns: minmax(220px, 320px) 1fr; gap:12px;">
                <div style="background: var(--surface-1); border:1px solid var(--border-default); border-radius: var(--radius-lg); padding:10px; max-height:70vh; overflow:auto;">
                    <div style="font-size:12px; color:var(--text-muted); margin-bottom:8px;">Log Days</div>
                    <div id="journal-day-list"></div>
                </div>
                <div style="display:grid; gap:10px; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); align-content:start;">
                    <div class="agent-dash-card">
                        <div class="agent-dash-card-title">‚úÖ Completed</div>
                        <div id="journal-section-completed" style="font-size:12px; color:var(--text-secondary);"></div>
                    </div>
                    <div class="agent-dash-card">
                        <div class="agent-dash-card-title">‚õî Blockers</div>
                        <div id="journal-section-blockers" style="font-size:12px; color:var(--text-secondary);"></div>
                    </div>
                    <div class="agent-dash-card">
                        <div class="agent-dash-card-title">üß† Decisions</div>
                        <div id="journal-section-decisions" style="font-size:12px; color:var(--text-secondary);"></div>
                    </div>
                    <div class="agent-dash-card">
                        <div class="agent-dash-card-title">üìå Pending follow-ups</div>
                        <div id="journal-section-followups" style="font-size:12px; color:var(--text-secondary);"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="agents-journal-shell" style="display:none;">
            <div style="display:grid; grid-template-columns: minmax(220px, 320px) 1fr; gap:12px; align-items:start;">
                <div style="background: var(--surface-1); border:1px solid var(--border-default); border-radius: var(--radius-lg); padding:10px; max-height:72vh; overflow:auto;">
                    <div style="font-size:12px; color:var(--text-muted); margin-bottom:8px;">Journal Days</div>
                    <div id="journal-day-list-timeline"></div>
                </div>
                <div class="agent-dash-card" style="min-height:65vh;">
                    <div class="agent-dash-card-title" id="journal-timeline-title">üìù Journal</div>
                    <div id="journal-timeline-body" style="font-size:13px; color:var(--text-secondary); display:grid; gap:10px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END AGENTS PAGE -->