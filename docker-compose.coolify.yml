version: '3.8'

services:
  dashboard:
    build: .
    ports:
      - "3000:3000"
    restart: unless-stopped
    volumes:
      # CRITICAL: Persist dashboard state between deployments
      - dashboard-data:/app/data
      # Mount memory files from OpenClaw workspace
      - /home/node/.openclaw/workspace/memory:/app/memory:ro
      # Mount scripts directory for functionality
      - /home/node/.openclaw/workspace/scripts:/app/scripts:ro
      # Mount OpenClaw directory for reading config (models, etc.)
      - /home/node/.openclaw:/app/openclaw:ro
      # Mount sessions directory for reading chat history
      - /home/node/.openclaw/sessions:/app/sessions:ro

volumes:
  dashboard-data:
    driver: local
